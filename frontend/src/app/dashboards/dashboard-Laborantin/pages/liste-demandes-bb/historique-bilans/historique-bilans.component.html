<header class="header">Liste des Bilans Biologiques</header>

<div class="relative flex flex-col items-center h-full px-10 py-6 bg-background-gray">
  <!-- Client Information -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 w-full">
    <!-- NSS -->
    <div class="form-group">
      <label for="nss" class="label">NSS</label>
      <input
        id="nss"
        type="text"
        [(ngModel)]="nss"
        name="nss"
        readonly
        class="input bg-gray-100"
      />
    </div>

    <!-- Nom Complet -->
    <div class="form-group">
      <label for="nomComplet" class="label">Nom Complet</label>
      <input
        id="nomComplet"
        type="text"
        [(ngModel)]="nomComplet"
        name="nomComplet"
        readonly
        class="input bg-gray-100"
      />
    </div>
  </div>

  <!-- Table -->
  <table class="w-full pb-4 overflow-hidden bg-white border-separate rounded-2xl">
    <thead>
      <tr>
        <th class="px-4 py-3 text-xs font-medium text-left uppercase bg-white border-b border-gray-200 text-dark-gray font-main">
          Date de Demande
        </th>
        <th class="px-4 py-3 text-xs font-medium text-left uppercase bg-white border-b border-gray-200 text-dark-gray font-main">
          Par Docteur
        </th>
        <th class="px-4 py-3 text-xs font-medium text-left uppercase bg-white border-b border-gray-200 text-dark-gray font-main">
          Actions
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let bilan of paginatedBilans" class="text-sm text-black hover:bg-gray-50">
        <td class="td">{{ bilan.date }}</td>
        <td class="td">{{ bilan.parDocteur }}</td>
        <td class="td">
          <button
            *ngIf="!bilan.isProcessed"
            (click)="addBilan(bilan)"
            class="hover:underline text-blue-500"
          >
            + Ajouter Bilan
          </button>
          <button
            *ngIf="bilan.isProcessed"
            (click)="editBilan(bilan)"
            class="hover:underline text-green-600"
          >
            + Modifier Bilan
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination Controls -->
  <div class="flex items-center justify-center py-2 space-x-2 text-black">
    <button
      class="px-4 py-2 text-xs font-semibold text-white rounded-md bg-primary-blue hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
      (click)="changePage(1)"
      [disabled]="currentPage === 1"
    >
      First
    </button>
    <button
      class="px-4 py-2 text-xs font-medium bg-white border rounded-lg text-primary-blue border-primary-blue hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed"
      (click)="changePage(currentPage - 1)"
      [disabled]="currentPage === 1"
    >
      Prev
    </button>
    <span class="px-4 py-2 text-xs font-medium text-gray-800">
      Page {{ currentPage }} of {{ totalPages }}
    </span>
    <button
      class="px-4 py-2 text-xs font-medium bg-white border rounded-lg text-primary-blue border-primary-blue hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed"
      (click)="changePage(currentPage + 1)"
      [disabled]="currentPage === totalPages"
    >
      Next
    </button>
    <button
      class="px-4 py-2 text-xs font-semibold text-white rounded-md bg-primary-blue hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
      (click)="changePage(totalPages)"
      [disabled]="currentPage === totalPages"
    >
      Last
    </button>
  </div>

  <!-- Footer Buttons -->
  <div class="flex items-center justify-between w-full mt-4">
    <button (click)="goBack()" class="px-4 py-2 text-blue-500 border rounded hover:bg-blue-100">
      Retour
    </button>
    <button (click)="generateComparativeGraph()" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700">
      + Générer Graphique Comparatif
    </button>
    <button (click)="saveBilans()" class="px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-700">
      Soumettre
    </button>
  </div>
</div>
